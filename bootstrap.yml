before_script:
  - apt-get update && apt-get install curl wget apt-utils lsb-release gnupg2 software-properties-common apt-transport-https -y
  - curl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add -
  - apt-add-repository "deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable"
  - curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
  - touch /etc/apt/sources.list.d/kubernetes.list 
  - echo "deb http://apt.kubernetes.io/ kubernetes-xenial main" | tee -a /etc/apt/sources.list.d/kubernetes.list
  - curl https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get | bash
  - curl -sL https://deb.nodesource.com/setup_10.x | bash
  - wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.asc.gpg
  - mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/
  - wget -q https://packages.microsoft.com/config/debian/9/prod.list
  - mv prod.list /etc/apt/sources.list.d/microsoft-prod.list
  - chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg
  - chown root:root /etc/apt/sources.list.d/microsoft-prod.list
  - AZ_REPO=$(lsb_release -cs)
  - echo "deb [arch=amd64] https://packages.microsoft.com/repos/azure-cli/ $AZ_REPO main" | tee /etc/apt/sources.list.d/azure-cli.list
  - curl -L https://packages.microsoft.com/keys/microsoft.asc | apt-key add -
  - apt-get update && apt-get upgrade -y
  - apt-get install -y python3 python3-pip git powershell ca-certificates docker-ce kubectl nodejs dotnet-sdk-2.1 azure-cli
  - pip3 install PyYAML semantic-version schema
  - mkdir /opt/bump/
  - wget https://raw.githubusercontent.com/fredshonorio/bump/master/bump.py -O /opt/bump/bump.py
  - chmod +x /opt/bump/bump.py
  - ln -s /opt/bump/bump.py /usr/local/bin/bump 
  - npm install yarn gulp gulp-webserver semantic-release-gitlab -g